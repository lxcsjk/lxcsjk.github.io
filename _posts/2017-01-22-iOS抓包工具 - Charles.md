---
layout: post
title:  "iOSæŠ“åŒ…å·¥å…· - Charles"
date:   2017-01-22 20:00:03 +0800
categories: jekyll update
tags: Charles
---

è¿‡å¹´ä¹Ÿåœ¨å®¶ä¹Ÿæ²¡å•¥äº‹æƒ…ï¼Œé—²ç€æ— èŠå°±æ•´ç†æ•´ç†è‡ªå·±å­¦ä¹ iOSçš„ç»å†ä»¥åŠè§£å†³çš„é—®é¢˜andçŸ¥è¯†ç‚¹ï¼ˆè™½ç„¶æˆ‘å¾ˆèœğŸ˜‚ğŸ˜‚ï¼‰ã€‚æ¸©æ•…è€ŒçŸ¥æ–°å§ğŸ˜€ğŸ˜€

---

**Charles** ä¸€ä¸ªç½‘ç»œæŠ“åŒ…å·¥å…·ï¼Œå¯ä»¥æ¸…æ™°çœ‹åˆ°ç½‘ç»œè¯·æ±‚å‚æ•°å€¼ä»¥åŠè¿”å›çš„responseç»“æœã€‚å¯¹äºæ—¥å¸¸å¼€å‘è¿˜æ˜¯éå¸¸æœ‰å¸®åŠ©çš„ã€‚

### å®‰è£… Charles

[æœ‰é’±è¯·æ”¯æŒæ­£ç‰ˆ](https://www.charlesproxy.com/)

[æ²¡é’±æˆ³è¿™é‡Œ(è¯·æ”¯æŒæ­£ç‰ˆ)](http://oh6uhie7j.bkt.clouddn.com/charles-proxy-4.0.1.zip)

æ‹–å…¥  **åº”ç”¨ç¨‹åº**  å³å¯

---

### Charlesçš„ç®€å•ä½¿ç”¨

1. å°†Charlesè®¾ç½®æˆç³»ç»Ÿçš„ä»£ç†æœåŠ¡å™¨ã€‚

å¦‚å›¾ã€‚

![](http://oh6uhie7j.bkt.clouddn.com/QQ20170122-193921@2x.png)

ç„¶åå°±å¯ä»¥çœ‹åˆ°å¾ˆå¤šç½‘ç»œè¯·æ±‚å‡ºç°åœ¨Charlesçš„ç•Œé¢é‡Œ

![](http://oh6uhie7j.bkt.clouddn.com/QQ20170122-193551@2x.png)

2. æ˜¾ç¤ºè§†å›¾

Charlesæä¾›äº†ä¸¤ç§æ˜¾ç¤ºè§†å›¾çš„æ–¹å¼ï¼Œåˆ†åˆ«ä¸º **Structure** å’Œ **Sequence**ã€‚

åŒºåˆ«å¦‚ä¸‹ï¼š

- **Structure** è§†å›¾å°†ç½‘ç»œè¯·æ±‚æŒ‰è®¿é—®çš„åŸŸååˆ†ç±»ã€‚
- **Sequence** è§†å›¾å°†ç½‘ç»œè¯·æ±‚æŒ‰è®¿é—®çš„æ—¶é—´æ’åºã€‚

å‰é¢çš„å›¾ä¸º**Structure** 

ä¸‹é¢çš„å›¾ä¸º**Sequence**
![](http://oh6uhie7j.bkt.clouddn.com/QQ20170122-194802@2x.png)

å•å‡»å…¶ä¸­ä¸€ä¸ªç½‘ç»œè¯·æ±‚ï¼Œæ ¹æ®é¢æ¿ä¸Šçš„tagå³å¯åœ¨ä¸‹é¢ç©ºç™½çœ‹åˆ°ç›¸åº”çš„**request**è¯·æ±‚å‚æ•°å’Œ**response**è¿”å›ç»“æœäº†

3. è¿‡æ»¤ç½‘ç»œè¯·æ±‚

- åœ¨ **Sequence** è§†å›¾æ¨¡å¼æœ‰ä¸€ä¸ª **Filter** çš„è¾“å…¥æ¡†

![](http://oh6uhie7j.bkt.clouddn.com/QQ20170122-195706@2x.png)

- å¦ä¸€ç§æ–¹å¼ï¼Œé€‰ä¸­ä¸€ä¸ªåœ¨å³é”®å‡ºçš„ä¸‹æ‹‰èœå•ä¸­ç‚¹å‡» **Focus**ï¼Œç„¶å**Filter** çš„è¾“å…¥æ¡†åé¢å‹¾é€‰ **Focused** 

![](http://oh6uhie7j.bkt.clouddn.com/QQ20170122-200349@2x.png)

- åœ¨ **Structure** è§†å›¾æ¨¡å¼ åœ¨èœå•æ é€‰æ‹© ```Proxy->Recording Settings```ï¼Œç„¶åé€‰æ‹© Include æ ï¼Œé€‰æ‹©æ·»åŠ ä¸€ä¸ªé¡¹ç›®ï¼Œç„¶åå¡«å…¥éœ€è¦ç›‘æ§çš„åè®®ï¼Œä¸»æœºåœ°å€ï¼Œç«¯å£å·ã€‚

![](http://oh6uhie7j.bkt.clouddn.com/QQ20170122-200139@2x.png)

---

### æŠ“å–ç§»åŠ¨è®¾å¤‡ä¸Šçš„è¯·æ±‚å°åŒ…

1. è®¾ç½®Charlesçš„ä»£ç†åŠŸèƒ½ å¦‚å›¾

![](http://oh6uhie7j.bkt.clouddn.com/QQ20170122-201137@2x.png)

2. æ‰‹æœºä¸Šçš„è®¾ç½®

PCå’Œæ‰‹æœºæœ€å¥½ç”¨åŒä¸€ä¸ªç½‘å…³è¦æ–¹ä¾¿ç‚¹ï¼Œæ¯•ç«Ÿéƒ½æ˜¯åœ¨åŠå…¬å®¤å·¥ä½œå˜›ã€‚

- è·å–åˆ°ç”µè„‘çš„ipåœ°å€ 

![](http://oh6uhie7j.bkt.clouddn.com/QQ20170122-201522@2x.png)

- è®¾ç½®æ‰‹æœºçš„HTTPä»£ç†

è¿›å…¥åˆ° "è®¾ç½®" - "æ— çº¿å±€åŸŸç½‘" - "ã€ä½ çš„WiFiåå­—ã€‘æ—è¾¹çš„è¯¦æƒ…"
å‘ä¸‹æ‹‰åˆ°æœ€åº•ï¼Œå¡«å…¥ä½ PCçš„ipå’ŒCharlesçš„ä»£ç†ç«¯å£å· 

![](http://oh6uhie7j.bkt.clouddn.com/6646E7369EAC5D316F3E2C9AFD4C5513.png)

é€‰æ‹© **Allow** 

![](http://oh6uhie7j.bkt.clouddn.com/QQ20170122-202158@2x.png)

åœ¨é¢ç‰ˆå°†ä¼šçœ‹åˆ°æ‰‹æœºå‘å‡ºæ¥å—çš„ç½‘ç»œè¯·æ±‚äº†ã€‚

---

### æŠ“åŒ…HTTPS

1. å®‰è£… **Charles** çš„CAè¯ä¹¦

"èœå•æ " - "SSL Proxying" - "Install Charles Root Certificate"

![](http://oh6uhie7j.bkt.clouddn.com/QQ20170122-202745@2x.png)

åœ¨é’¥åŒ™ä¸²ä¸­å¯ä»¥æœç´¢åˆ°
![](http://oh6uhie7j.bkt.clouddn.com/QQ20170122-202909@2x.png)

ç„¶åé€‰ä¸­ä¸€æ¡ HTTPS è¯·æ±‚ï¼Œå³é”®é€‰æ‹© **Enable SSL proxy** ç„¶åå°±èƒ½çœ‹åˆ°ä¸å†ä¹±ç çš„è¯·æ±‚ä¿¡æ¯äº†

![](http://oh6uhie7j.bkt.clouddn.com/QQ20170122-203656@2x.png)

2. æŠ“åŒ…ç§»åŠ¨è®¾å¤‡çš„SSLè¯·æ±‚

è¿™é‡Œéœ€è¦åœ¨æ‰‹æœºä¸Šå®‰è£…ä¸€ä¸ªè¯ä¹¦ï¼Œå¦‚å›¾

![](http://oh6uhie7j.bkt.clouddn.com/C140ACC2-C585-4CCA-9CE2-394FCA2B9359.png)

![](http://oh6uhie7j.bkt.clouddn.com/QQ20170122-203821@2x.png)

å¼¹å‡ºä¸€ä¸ªæç¤ºå‘Šè¯‰ä½  éœ€è¦è®¾ç½®ä»£ç†ç„¶åç”¨æ‰‹æœºæµè§ˆå™¨æ‰“å¼€ä¸€ä¸ªåœ°å€å®‰è£…ä¸€ä¸ªè¯ä¹¦  [åœ°å€](http://chls.pro/ssl)

![](http://oh6uhie7j.bkt.clouddn.com/1D32AC22C2B0BF8458259E30A7DF427F.png)

ç„¶åå’Œä¸Šé¢ä¸€æ · **Enable SSL proxy** 

example ~

æŠ“åŒ…keepçš„å°è§†é¢‘

![](http://oh6uhie7j.bkt.clouddn.com/QQ20170122-205909@2x.png)


---

### æ¨¡æ‹Ÿç½‘ç»œç¯å¢ƒå·®

Charlesæä¾›è¿™æ ·çš„æ”¯æŒï¼Œåªéœ€è¦æ›´æ”¹æ·»åŠ é…ç½®ä¸hostå³å¯ã€‚å¦‚å›¾

![](http://oh6uhie7j.bkt.clouddn.com/QQ20170122-205122@2x.png)

---

ç›®å‰å¸¸å¸¸ç”¨åˆ°å°±æ˜¯è¿™ä¹ˆå¤š~~~ å¦‚æœæœ‰ä¸è¶³å¯ä»¥çœ‹çœ‹ [å”å·§å¤§ç¥çš„åšå®¢](http://blog.devtang.com/2015/11/14/charles-introduction/)
